function e(e,t,n,s){Object.defineProperty(e,t,{get:n,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},r=n.parcelRequire1f3a;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return s[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},n.parcelRequire1f3a=r),r.register("bXuNP",(function(t,n){var s,i;e(t.exports,"register",(()=>s),(e=>s=e)),e(t.exports,"resolve",(()=>i),(e=>i=e));var r={};s=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},i=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("bXuNP").register(JSON.parse('{"aI7At":"index.1ce9216a.js","3IStX":"top100.41c97447.jpg"}'));var l;r.register("kPq84",(function(t,n){var s;e(t.exports,"getBundleURL",(()=>s),(e=>s=e));var i={};function r(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}s=function(e){var t=i[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return r(e[2])}return"/"}(),i[e]=t),t}})),l=r("kPq84").getBundleURL("aI7At")+r("bXuNP").resolve("3IStX");const a=new class{render(e,t,n){const s=document.querySelector(e),i=t?.category,r=t.songs.map(((e,t)=>n(i,e,t)));s.innerHTML="",r.forEach((e=>{s.insertAdjacentHTML("beforeend",e)}))}renderAlbums(e,n={}){this.render(e,n,((e,n,s)=>`\n          <div class="playlist-section__item">\n          <a href="detail.html?category=${e}&playlistIndex=${s}" class="playlist-section__item">\n            <div class="playlist-section__item-img">\n            <img src="${t(l)}" alt="" />\n              <div class="playlist-section__item-img-icon">\n                <i class="far fa-play-circle"></i>\n              </div>\n            </div>\n            <h5 class="playlist-section__item-name">\n              Top 100 Bài Hát ${n.name} Hay Nhất\n            </h5>\n          </a>\n        </div>\n          `))}renderDetail(e){document.querySelectorAll(".playlist-desc__name").forEach((t=>{t.textContent=e.name})),this.render(".song__list",e,((e,t,n)=>`\n        <li class="song__item" data-index ="${n}">\n         <audio src="${t.music}" hidden></audio>\n        <div class="song__item-left">\n          <div class="song__item-icon">\n            <i class="fas fa-music"></i>          \n          </div>\n\n          <div class="song__item-img">\n            <img\n              src="${t.avatar}"\n              alt=""\n            />\n            <div class="song__item-img-icon">\n              <i class="fas fa-play"></i>\n            </div>\n          </div>\n\n          <div class="song__item-info">\n            <h5 class="song__item-name">\n              ${t.title}\n            </h5>\n            <span class="song__item-singer"\n              >${t.creator}</span\n            >\n          </div>\n        </div>\n\n        <span class="song__item-time"></span>\n      </li>\n        \n        `));document.querySelectorAll(".song__item").forEach((e=>{this.#e(e)}))}#e(e){const t=e.querySelector("audio");t.addEventListener("loadeddata",(()=>{const n=t.duration,s=Math.trunc(n/60),i=Math.floor(n%60);e.querySelector(".song__item-time").textContent=`${s} : ${i<10?"0"+i:i}`})),t.addEventListener("error",(()=>{e.classList.add("song__item--error"),e.querySelector(".song__item-time").innerHTML=' <div class="error">\n          <i class="fas fa-exclamation"></i>\n        </div>'}))}};const o=new class{#t={};#n=[];#s=!1;#i=!1;#r=!1;#l=!1;#a=null;#o=[];#c=0;init(e,t){const{songInfo:{songImg:n,songName:s,songSinger:i},control:{random:r,backward:l,play:a,forward:o,repeat:c},progress:{track:d,lower:h,currentTime:m,songTime:u},audio:g,container:_}=e;this.#t.container=document.querySelector(_),this.#t.songImg=document.querySelector(n),this.#t.songName=document.querySelector(s),this.#t.songSinger=document.querySelector(i),this.#t.random=document.querySelector(r),this.#t.backward=document.querySelector(l),this.#t.play=document.querySelector(a),this.#t.forward=document.querySelector(o),this.#t.repeat=document.querySelector(c),this.#t.track=document.querySelector(d),this.#t.lower=document.querySelector(h),this.#t.currentTime=document.querySelector(m),this.#t.songTime=document.querySelector(u),this.#t.audio=document.querySelector(g),this.#d(),this.#n=t}render(e,t){location.hash=`${t}`,this.#s||this.#t.container.classList.add("song-player--display"),this.#a=t,this.#t.audio.src=e.music,this.#t.songImg.src=e.avatar,this.#t.songName.textContent=e.title,this.#t.songSinger.textContent=e.creator,this.#t.audio.addEventListener("loadeddata",(()=>{this.#t.songTime.textContent=this.#h(this.#t.audio.duration)}))}#h(e){const t=Math.trunc(e/60),n=Math.ceil(e%60);return`${t}:${n<10?"0"+n:n}`}playSong(){this.#i=!0;this.#t.audio.play(),this.#t.play.classList.add("song-control__play--playing"),this.#t.songImg.parentElement.classList.add("song-img--rotate"),this.pauseAnimation(!1)}pauseAnimation(e){this.#t.songImg.parentElement.style.animationPlayState=e?"paused":null}#d(){const e=this.#t.audio,t=()=>{e.pause(),this.#t.play.classList.remove("song-control__play--playing"),this.pauseAnimation(!0)},n=t=>{e.loop=t},s=()=>{if(this.#l)if(this.#c++,this.#c<this.#o.length)this.render(this.#n[this.#o[this.#c]],this.#o[this.#c]);else{const e=Math.floor(Math.random()*this.#n.length+1);this.render(this.#n[e],e),this.#o.push(e)}else this.#a=this.#a+1>this.#n.length-1?this.#n-1:this.#a+1,this.render(this.#n[this.#a],this.#a)},i=()=>{if(this.#l)this.#c=this.#c-1<0?0:this.#c-1,this.render(this.#n[this.#o[this.#c]],this.#o[this.#c]);else{--this.#a<0&&(this.#a=0),this.render(this.#n[this.#a],this.#a)}};this.#t.play.addEventListener("click",(()=>{this.#i=!this.#i,this.#i?this.playSong():t()})),this.#t.backward.addEventListener("click",(()=>{i(),this.#i&&this.playSong()})),this.#t.forward.addEventListener("click",(()=>{s(),this.#i&&this.playSong()})),this.#t.repeat.addEventListener("click",(()=>{this.#r=!this.#r,this.#r?(this.#t.repeat.classList.add("song-control__repeat--active"),n(this.#r)):(this.#t.repeat.classList.remove("song-control__repeat--active"),n(this.#r))})),this.#t.random.addEventListener("click",(()=>{this.#l=!this.#l,this.#o.push(this.#a),this.#l?this.#t.random.classList.add("song-control__random--active"):this.#t.random.classList.remove("song-control__random--active")})),this.#t.track.addEventListener("click",(e=>{const{left:t,width:n}=e.target.getBoundingClientRect(),s=100*(e.clientX-t)/n;this.#t.lower.style.width=`${s}%`,this.#t.audio.currentTime=s/100*this.#t.audio.duration})),e.addEventListener("timeupdate",(()=>{const t=100*e.currentTime/e.duration;this.#t.currentTime.textContent=this.#h(e.currentTime),this.#t.lower.style.width=`${t}%`})),e.addEventListener("ended",(()=>{this.#t.play.classList.remove("song-control__play--playing"),s(),this.playSong()})),e.addEventListener("loadstart",(()=>{this.#t.play.classList.add("song-control__play--loading"),this.#t.play.classList.remove("song-control__play--error")})),e.addEventListener("loadedmetadata",(()=>{this.#t.play.classList.remove("song-control__play--loading")})),e.addEventListener("error",(()=>{this.#t.play.classList.remove("song-control__play--loading"),this.#t.play.classList.add("song-control__play--error")}))}},c=document.querySelector(".header__search-input");c.addEventListener("focusin",(function(){document.querySelector(".header__search").classList.add("header__search--searching")})),c.addEventListener("focusout",(function(){document.querySelector(".header__search").classList.remove("header__search--searching")}));document.querySelector(".header__search-result__list").addEventListener("mousedown",(e=>{e.preventDefault()}));const d=new class{#m;#u={category:"AM"};#g={category:"CA"};#_={category:"VN"};#p={category:"KL"};async getData(e){const t=await fetch(e),{songs:n}=await t.json(),{top100_AM:s,top100_CA:i,top100_KL:r,top100_VN:l}=n;this.#m=n,this.#u.songs=s,this.#g.songs=i,this.#p.songs=r,this.#_.songs=l}getAllSong(){return this.#m}getAM(){return this.#u}getCA(){return this.#g}getKL(){return this.#p}getVN(){return this.#_}};class h{#t={};#y;#v=0;constructor(e){const{container:t,prev:n,next:s}=e;this.#t.container=document.querySelector(t),this.#t.prev=document.querySelector(n),this.#t.next=document.querySelector(s)}init(){const e=this.#t.container,t=e.cloneNode(!0);e.className="slider",Object.assign(e.style,{overflow:"hidden"}),t.style="transition: transform 0.3s linear",e.innerHTML="",e.appendChild(t),this.#y=Math.ceil(e.firstChild.childElementCount/this.#f()),this.#S(),this.#d()}#x(){this.#t.prev.style="font-size: 0"}#L(){this.#t.next.style="font-size: 0"}#I(){this.#t.prev.style="font-size: ỉnherit"}#w(){this.#t.next.style="font-size: ỉnherit"}#S(){this.#x(),this.#L(),this.#v>0&&this.#I(),this.#v<this.#y-1&&this.#w()}#f(){const e=document.querySelector(".slider"),t=this.#t.container.firstChild.children[0];return+(e.clientWidth/t.clientWidth).toFixed(0)}#E(e){this.#t.container.firstChild.style.transform=`translate(${100*-e}%)`}#d(){this.#t.prev.addEventListener("click",(()=>{--this.#v,this.#E(this.#v),this.#S()})),this.#t.next.addEventListener("click",(()=>{++this.#v,this.#E(this.#v),this.#S()}))}}class m{#t={};#A=[];constructor(e,t){const{searchInput:n,searchResult:s,searchResultItem:i,searchMessage:r}=e;this.#t.searchInput=document.querySelector(n),this.#t.searchResult=document.querySelector(s),this.#t.searchResultItem=document.querySelector(i),this.#t.searchMessage=document.querySelector(r),this.#A=t,this.#d()}#q(e,t){return this.#A.filter((t=>t.name.toLowerCase().includes(e.toLowerCase().trim()))).slice(0,t)}#k(e){this.#t.searchMessage.textContent=e}#M(e){const n=this.#t.searchResult;n.innerHTML="",e.length>0?this.#k(""):this.#k("Không có kết quả"),e.forEach((e=>n.insertAdjacentHTML("beforeend",`<li class="header__search-result__item">\n        <a href="detail.html?category=${e.category}&playlistIndex=${e.index}" class="header__search-result__item-link">\n          <div class="header__search-result__item-img">\n            <img src="${t(l)}" alt="Image" />\n          </div>\n          <div class="header__search-result__item-info">\n            <span class="header__search-result__item-name"\n              >${e.name}</span\n            >\n            <span class="header__search-result__item-singer"\n              >Playlist</span\n            >\n          </div>\n        </a>\n      </li>`)))}#d(){const e=this.#t.searchInput;e.addEventListener("keyup",(()=>{this.#M(this.#q(e.value,5))}))}}d.getData("https://api.apify.com/v2/key-value-stores/EJ3Ppyr2t73Ifit64/records/LATEST").then((()=>{const e=location.pathname;if("/"===e||e.includes("index.html"))a.renderAlbums(".playlist--AM .playlist-section__list",d.getAM()),a.renderAlbums(".playlist--CA .playlist-section__list",d.getCA()),a.renderAlbums(".playlist--KL .playlist-section__list",d.getKL()),a.renderAlbums(".playlist--VN .playlist-section__list",d.getVN()),new h({container:".playlist--VN .playlist-section__list",prev:".playlist--VN .slider-control__prev",next:".playlist--VN .slider-control__next"}).init(),new h({container:".playlist--CA .playlist-section__list",prev:".playlist--CA .slider-control__prev",next:".playlist--CA .slider-control__next"}).init(),new h({container:".playlist--AM .playlist-section__list",prev:".playlist--AM .slider-control__prev",next:".playlist--AM .slider-control__next"}).init(),new h({container:".playlist--KL .playlist-section__list",prev:".playlist--KL .slider-control__prev",next:".playlist--KL .slider-control__next"}).init();else if(e.includes("detail.html")){const e=location.search,t=e.slice(e.indexOf("=")+1,e.indexOf("&")),n=e.slice(e.lastIndexOf("=")+1),s=document.querySelector(".random-btn");let i=null;switch(t){case"AM":i=d.getAM().songs;break;case"CA":i=d.getCA().songs;break;case"KL":i=d.getKL().songs;break;case"VN":i=d.getVN().songs}s.addEventListener("click",(()=>{const e=i[n].songs[0];document.querySelector(".playlist-img img").src=e.avatar,o.render(e,0),o.playSong()})),a.renderDetail(i[n]);const r=document.querySelectorAll(".song__item");o.init({container:".song-player",songInfo:{songImg:".song-img img",songName:".song-name",songSinger:".song-singer"},control:{random:".song-control__random",backward:".song-control__backward",play:".song-control__play",forward:".song-control__forward",repeat:".song-control__repeat"},progress:{track:".song-control__progress__track",lower:".song-control__progress__lower",currentTime:".song-control__current-time",songTime:".song-control__song-time"},audio:".song-player audio"},i[n].songs),r.forEach((e=>{e.addEventListener("click",(function(){const e=+this.dataset.index,t=document.querySelector(".playlist-img img"),s=i[n].songs[e];t.src=s.avatar,o.render(s,e),o.playSong()}))})),document.querySelector(".playlist-img").addEventListener("click",(()=>{location.hash.slice(1)||o.render(i[0]),o.playSong()}))}const t=[];Object.entries(d.getAllSong()).forEach((([e,n])=>{const s=n.map(((t,n)=>(t.name=`Top 100 Bài hát ${t.name} hay nhất`,t.category=e.slice(e.indexOf("_")+1),t.index=n,t)));t.push(...s)})),new m({searchInput:".header__search-input-container input",searchResult:".header__search-result__list",searchResultItem:".header__search-result__item",searchMessage:".header__search-result__message"},t)})),window.addEventListener("hashchange",(()=>{const e=document.querySelector(".song__item--active"),t=location.hash.slice(1),n=document.querySelector(`.song__item[data-index='${t}']`);e?.classList.remove("song__item--active"),n?.classList.add("song__item--active")}));
//# sourceMappingURL=index.1ce9216a.js.map
